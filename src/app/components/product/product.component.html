<div class="md:ml-64">
  <div class="mt-20">
    <div class="group2 visible mx-5 md:invisible">
      <svg class="icon" aria-hidden="true" viewBox="0 0 24 24">
        <g>
          <path
            d="M21.53 20.47l-3.66-3.66C19.195 15.24 20 13.214 20 11c0-4.97-4.03-9-9-9s-9 4.03-9 9 4.03 9 9 9c2.215 0 4.24-.804 5.808-2.13l3.66 3.66c.147.146.34.22.53.22s.385-.073.53-.22c.295-.293.295-.767.002-1.06zM3.5 11c0-4.135 3.365-7.5 7.5-7.5s7.5 3.365 7.5 7.5-3.365 7.5-7.5 7.5-7.5-3.365-7.5-7.5z"
          ></path>
        </g>
      </svg>
      <input
        (input)="searchProduct($event)"
        placeholder="Busqueda"
        type="search"
        class="input"
      />
    </div>
    <div class="visible md:hidden mx-5 mt-5 -mb-20">
      <button
        (click)="getPDF()"
        class="flex flex-row justify-around w-full bg-black text-white px-24 py-2 rounded-xl"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="w-5 h-5"
          viewBox="0 0 24 24"
        >
          <path
            fill="currentColor"
            d="m12 16l-5-5l1.4-1.45l2.6 2.6V4h2v8.15l2.6-2.6L17 11zm-6 4q-.825 0-1.412-.587T4 18v-3h2v3h12v-3h2v3q0 .825-.587 1.413T18 20z"
          />
        </svg>
        Descargar PDF
      </button>
    </div>
    <div class="flex items-center justify-between p-4 md:-mt-20 md:p-5 md:mb-2">
      <div
        class="flex invisible md:visible flex-row w-full bg-gray-200 rounded-lg py-2 justify-between items-center px-4 md:px-6 dark:bg-gray-700"
      >
        <div class="group">
          <svg class="icon" aria-hidden="true" viewBox="0 0 24 24">
            <g>
              <path
                d="M21.53 20.47l-3.66-3.66C19.195 15.24 20 13.214 20 11c0-4.97-4.03-9-9-9s-9 4.03-9 9 4.03 9 9 9c2.215 0 4.24-.804 5.808-2.13l3.66 3.66c.147.146.34.22.53.22s.385-.073.53-.22c.295-.293.295-.767.002-1.06zM3.5 11c0-4.135 3.365-7.5 7.5-7.5s7.5 3.365 7.5 7.5-3.365 7.5-7.5 7.5-7.5-3.365-7.5-7.5z"
              ></path>
            </g>
          </svg>
          <input
            (input)="searchProduct($event)"
            placeholder="Busqueda"
            type="search"
            class="input"
          />
        </div>
        <div class="flex felx-row gap-5">
          <button
            (click)="setWindow('new-product')"
            type="button"
            class="flex text-white bg-lime-500 hover:bg-lime-800 focus:ring-4 focus:outline-none focus:ring-lime-300 font-medium rounded-lg text-sm px-5 py-2.5"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              viewBox="0 0 24 24"
            >
              <path fill="currentColor" d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z" />
            </svg>
            <p>Agregar nuevo producto</p>
          </button>
          <button
            (click)="getPDF()"
            class="cursor-pointer group relative flex gap-1.5 px-8 py-2 bg-black bg-opacity-80 text-[#f1f1f1] rounded-3xl hover:bg-opacity-70 transition font-semibold shadow-md"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              height="24px"
              width="24px"
            >
              <g stroke-width="0" id="SVGRepo_bgCarrier"></g>
              <g
                stroke-linejoin="round"
                stroke-linecap="round"
                id="SVGRepo_tracerCarrier"
              ></g>
              <g id="SVGRepo_iconCarrier">
                <g id="Interface / Download">
                  <path
                    stroke-linejoin="round"
                    stroke-linecap="round"
                    stroke-width="2"
                    stroke="#f1f1f1"
                    d="M6 21H18M12 3V17M12 17L17 12M12 17L7 12"
                    id="Vector"
                  ></path>
                </g>
              </g>
            </svg>
            Descargar
            <div
              class="absolute opacity-0 -bottom-full rounded-md py-2 px-2 bg-black bg-opacity-70 left-1/2 -translate-x-1/2 group-hover:opacity-100 transition-opacity shadow-lg"
            >
              Descargar
            </div>
          </button>
        </div>
      </div>
    </div>
  </div>
  @if (isLoading) {
  <div class="flex md:items-center justify-center sm:top-0 mx-10">
    <div
      class="text-lg md:text-3xl flex justify-around gap-x-10 font-bold rounded-lg border shadow-lg p-10"
    >
      <div role="status">
        <svg
          aria-hidden="true"
          class="w-8 h-8 text-gray-200 animate-spin dark:text-gray-600 fill-blue-600"
          viewBox="0 0 100 101"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z"
            fill="currentColor"
          />
          <path
            d="M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z"
            fill="currentFill"
          />
        </svg>
        <span class="sr-only">Loading...</span>
      </div>

      Estamos cargando la informaciÃ³n, por favor espere...
    </div>
  </div>

  } @else if (productList.length === 0) {

  <!-- Card diciendo lo sentimos al aprecer no tienes productos con un emoji-->

  <a
    class="block max-w-sm p-6 bg-white border border-gray-200 rounded-lg shadow hover:bg-gray-100 dark:bg-gray-800 dark:border-gray-700 dark:hover:bg-gray-700"
  >
    <h5
      class="mb-2 text-2xl font-bold tracking-tight text-gray-900 dark:text-white"
    >
      Lo sentimos ðŸ˜¢
    </h5>
    <p class="font-normal text-gray-700 dark:text-gray-400">
      Al parecer no tienes productos en tu inventario, agrega uno para comenzar
      a adminsitrar.
    </p>
  </a>

  }@else {
  <div
    class="grid sm:grid-cols-none md:grid-cols-2 lg:grid-cols-4 gap-5 justify-center mx-5"
  >
    @for (item of products ; track item.id) {

    <div
      class="w-full justify-around max-w-sm pl-5 pr-5 pt-5 pb-2 bg-white border border-gray-200 rounded-lg shadow dark:bg-gray-800 dark:border-gray-700 flex flex-col items-stretch"
    >
      @if(!hasColor(item)){
      <img
        src="{{ item.photos[0].url }}"
        alt="{{ item.productname }}"
        class="w-full h-96 object-contain rounded-lg shadow-lg"
      />
      }@else { @for (color of formatColors(item); track $index) { @if
      (item.currentColor === color[0]) {
      <img
        src="{{ color[1] }}"
        alt="{{ item.productname }}"
        class="w-full h-96 object-contain rounded-lg shadow-lg"
      />
      } @else{
      <img
        src="{{ color[1] }}"
        alt="{{ item.productname }}"
        class="w-full h-96 object-contain rounded-lg shadow-lg hidden"
      />

      } } }
      <a class="md:mt-5">
        <h5
          class="text-2xl font-semibold tracking-tight text-gray-900 dark:text-white"
        >
          {{ item.productname }}
        </h5>
      </a>

      @if(item.hasColor){
      <div class="min-w-full mx-1 my-5 flex flex-row items-center gap-x-3">
        @for (color of formatColors(item); track $index) { @if
        (item.currentColor === color[0]) {
        <button
          (click)="setColor(item, color[0])"
          class="bg-{{
            color[0]
          }} size-10 md:size-5 lg:size-10 rounded-full outline outline-3 outline-offset-2 mb-5"
        ></button>
        } @else {
        <button
          (click)="setColor(item, color[0])"
          class="bg-{{
            color[0]
          }} size-10 md:size-5 lg:size-10 rounded-full outline-offset-2 outline-1 mb-5"
        ></button>
        } }
      </div>
      }@else {
      <div class="min-w-full mx-1 my-4 flex flex-row items-center gap-x-3">
        <p class="text-gray-500 text-xl mb-2 dark:text-gray-400">
          No tiene colores
        </p>
      </div>
      }

      <div class="flex items-center justify-between">
        <span class="text-3xl font-base text-gray-900 dark:text-white">{{
          getFormatter(item.homeprice.value)
        }}</span>
      </div>
      <div class="flex flex-col">
        <div class="flex flex-row justify-between mt-2">
          <!--Delete Button-->
          <button
            (click)="toggleDelete(item)"
            type="button"
            class="focus:outline-none text-white bg-red-700 hover:bg-red-800 focus:ring-4 focus:ring-red-300 font-medium rounded-lg text-sm px-2.5 py-2.5 me-2 mb-2 dark:bg-red-600 dark:hover:bg-red-700 dark:focus:ring-red-900"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              class="h-7 w-7"
              viewBox="0 0 24 24"
            >
              <path
                fill="currentColor"
                d="M9 3v1H4v2h1v13a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V6h1V4h-5V3zm0 5h2v9H9zm4 0h2v9h-2z"
              />
            </svg>
          </button>
          <!--Edit Button-->
          <a
            (click)="setEdit('edit-product', item)"
            class="text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm px-2.5 py-2.5 me-2 mb-2 dark:bg-blue-600 dark:hover:bg-blue-700 focus:outline-none dark:focus:ring-blue-800"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              class="h-7 w-7"
              viewBox="0 0 24 24"
            >
              <path
                fill="currentColor"
                d="M3 21v-4.25L16.2 3.575q.3-.275.663-.425t.762-.15q.4 0 .775.15t.65.45L20.425 5q.3.275.438.65T21 6.4q0 .4-.137.763t-.438.662L7.25 21zM17.6 7.8L19 6.4L17.6 5l-1.4 1.4z"
              />
            </svg>
          </a>
        </div>
      </div>
    </div>

    }
  </div>
  }
</div>
<!--Add mobile product-->
<div
  (click)="setWindow('new-product')"
  class="visible md:invisible fixed bottom-0 right-0 mb-8 mr-8 rounded-full bg-lime-500 shadow-md hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-lime-500 transition ease-in-out duration-150"
>
  <svg
    class="w-14 h-14 text-white mx-auto"
    xmlns="http://www.w3.org/2000/svg"
    viewBox="0 0 24 24"
  >
    <path fill="currentColor" d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z" />
  </svg>
</div>

@if(isDeleted){
<div
  class="fixed top-0 left-0 z-50 w-full h-full flex items-center justify-center bg-gray-500 bg-opacity-50"
>
  <div
    class="relative p-4 w-full max-w-md bg-white rounded-lg shadow dark:bg-gray-700 md:left-80 transform md:-translate-x-1/2 md:-translate-y-1/2"
  >
    <button
      (click)="closeDelete()"
      type="button"
      class="absolute top-3 end-2.5 text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white"
      data-modal-hide="popup-modal"
    >
      <svg
        class="w-3 h-3"
        aria-hidden="true"
        xmlns="http://www.w3.org/2000/svg"
        fill="none"
        viewBox="0 0 14 14"
      >
        <path
          stroke="currentColor"
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"
        />
      </svg>
      <span class="sr-only">Close modal</span>
    </button>
    <div class="p-4 md:p-5 text-center">
      <svg
        class="mx-auto mb-4 text-gray-400 w-12 h-12 dark:text-gray-200"
        aria-hidden="true"
        xmlns="http://www.w3.org/2000/svg"
        fill="none"
        viewBox="0 0 20 20"
      >
        <path
          stroke="currentColor"
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M10 11V6m0 8h.01M19 10a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"
        />
      </svg>
      <h3 class="mb-5 text-lg font-normal text-gray-500 dark:text-gray-400">
        Â¿EstÃ¡s seguro de que deseas eliminar este producto?
      </h3>
      <button
        (click)="deleteProduct()"
        data-modal-hide="popup-modal"
        type="button"
        class="text-white bg-red-600 hover:bg-red-800 focus:ring-4 focus:outline-none focus:ring-red-300 dark:focus:ring-red-800 font-medium rounded-lg text-sm inline-flex items-center px-5 py-2.5 text-center"
      >
        Si, eliminar
      </button>
      <button
        (click)="closeDelete()"
        data-modal-hide="popup-modal"
        type="button"
        class="py-2.5 px-5 ms-3 text-sm font-medium text-gray-900 focus:outline-none bg-white rounded-lg border border-gray-200 hover:bg-gray-100 hover:text-blue-700 focus:z-10 focus:ring-4 focus:ring-gray-100 dark:focus:ring-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:border-gray-600 dark:hover:text-white dark:hover:bg-gray-700"
      >
        No, cancelar
      </button>
    </div>
  </div>
</div>

} @if(IsCorrectlyDeleted === "true"){
<app-toast [message]="message" [type]="type" />
}@else if (IsCorrectlyDeleted==="false") {
<app-toast [message]="message" [type]="type" />
}
